import{c as je,j as t,H as he,a as ge,L as fe}from"./app-BPiuJiXE.js";import{A as ue}from"./app-layout-msTm_QoI.js";import{c as x}from"./button-Ro51u8WX.js";import{F as pe,S as Ne,T as ye}from"./trash-2-crMxzARG.js";import{S as be}from"./store-D6kISWkG.js";import"./app-mtoV7vCQ.js";import"./index-DYiqaCsJ.js";import"./index-Cv2by6ib.js";const ve=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],_e=x("ArrowLeft",ve);const we=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],ke=x("Calendar",we);const Se=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Ce=x("CircleCheck",Se);const Le=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],De=x("CircleX",Le);const Fe=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Ee=x("Image",Fe);const $e=[["path",{d:"M16 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8Z",key:"qazsjp"}],["path",{d:"M15 3v4a2 2 0 0 0 2 2h4",key:"40519r"}]],Ae=x("StickyNote",$e);const Te=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Me=x("User",Te);function Je(r){const e=je.c(97),{auth:a,audit:s}=r;if(!s){let C;e[0]===Symbol.for("react.memo_cache_sentinel")?(C=t.jsx(he,{title:"View Camera Form"}),e[0]=C):C=e[0];let L;e[1]===Symbol.for("react.memo_cache_sentinel")?(L=t.jsx("div",{className:"flex flex-1 flex-col gap-4 p-4 pt-0",children:t.jsx("div",{className:"rounded-lg border bg-card p-6",children:t.jsx("p",{className:"text-muted-foreground",children:"Loading..."})})}),e[1]=L):L=e[1];let c;return e[2]!==a.user?(c=t.jsxs(ue,{user:a.user,children:[C,L]}),e[2]=a.user,e[3]=c):c=e[3],c}let n,l,h,f,u,i,p,d,o,g,m;if(e[4]!==s.camera_forms||e[5]!==s.date||e[6]!==s.id||e[7]!==s.store?.store||e[8]!==s.user?.name||e[9]!==a.user){l=s.camera_forms?.map(qe).filter(Boolean);const C=l.reduce(Re,{}),L=ae=>s.camera_forms?.find(le=>le.entity_id===ae);let c;e[21]!==s.id?(c=()=>{confirm("Are you sure you want to delete this camera form?")&&ge.delete(`/camera-forms/${s.id}`,{onSuccess:Ue})},e[21]=s.id,e[22]=c):c=e[22];const Y=c;n=ue,g=a.user,e[23]===Symbol.for("react.memo_cache_sentinel")?(m=t.jsx(he,{title:"View Camera Form"}),e[23]=m):m=e[23],p="flex flex-1 flex-col gap-6 p-4 pt-0";let V;e[24]===Symbol.for("react.memo_cache_sentinel")?(V=t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(fe,{href:"/camera-forms",className:"text-muted-foreground hover:text-foreground transition-colors",children:t.jsx(_e,{className:"h-4 w-4"})}),t.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Camera Form Details"})]}),e[24]=V):V=e[24];let D;e[25]!==s.id?(D=t.jsxs("div",{className:"space-y-1",children:[V,t.jsxs("p",{className:"text-sm text-muted-foreground",children:["Form ID: #",s.id]})]}),e[25]=s.id,e[26]=D):D=e[26];const ee=`/camera-forms/${s.id}/edit`;let B;e[27]===Symbol.for("react.memo_cache_sentinel")?(B=t.jsx(Ne,{className:"h-4 w-4"}),e[27]=B):B=e[27];let F;e[28]!==ee?(F=t.jsxs(fe,{href:ee,className:"inline-flex items-center gap-2 justify-center rounded-md bg-primary px-4 py-2 text-sm font-medium text-primary-foreground shadow hover:bg-primary/90 transition-colors",children:[B,"Edit"]}),e[28]=ee,e[29]=F):F=e[29];let X;e[30]===Symbol.for("react.memo_cache_sentinel")?(X=t.jsx(ye,{className:"h-4 w-4"}),e[30]=X):X=e[30];let E;e[31]!==Y?(E=t.jsxs("button",{onClick:Y,className:"inline-flex items-center gap-2 justify-center rounded-md border border-destructive bg-destructive/10 px-4 py-2 text-sm font-medium text-destructive hover:bg-destructive/20 transition-colors",children:[X,"Delete"]}),e[31]=Y,e[32]=E):E=e[32];let $;e[33]!==F||e[34]!==E?($=t.jsxs("div",{className:"flex gap-2",children:[F,E]}),e[33]=F,e[34]=E,e[35]=$):$=e[35],e[36]!==D||e[37]!==$?(d=t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[D,$]}),e[36]=D,e[37]=$,e[38]=d):d=e[38];let O;e[39]===Symbol.for("react.memo_cache_sentinel")?(O=t.jsx("div",{className:"rounded-full bg-primary/10 p-3",children:t.jsx(ke,{className:"h-5 w-5 text-primary"})}),e[39]=O):O=e[39];let P;e[40]===Symbol.for("react.memo_cache_sentinel")?(P=t.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"Date"}),e[40]=P):P=e[40];let A;e[41]!==s.date?(A=new Date(s.date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),e[41]=s.date,e[42]=A):A=e[42];let T;e[43]!==A?(T=t.jsx("div",{className:"rounded-lg border bg-card p-6 hover:shadow-md transition-shadow",children:t.jsxs("div",{className:"flex items-center gap-3",children:[O,t.jsxs("div",{className:"space-y-1",children:[P,t.jsx("p",{className:"text-sm font-bold",children:A})]})]})}),e[43]=A,e[44]=T):T=e[44];let W;e[45]===Symbol.for("react.memo_cache_sentinel")?(W=t.jsx("div",{className:"rounded-full bg-accent/50 p-3",children:t.jsx(be,{className:"h-5 w-5 text-accent-foreground"})}),e[45]=W):W=e[45];let Z;e[46]===Symbol.for("react.memo_cache_sentinel")?(Z=t.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"Store"}),e[46]=Z):Z=e[46];const te=s.store?.store;let M;e[47]!==te?(M=t.jsx("div",{className:"rounded-lg border bg-card p-6 hover:shadow-md transition-shadow",children:t.jsxs("div",{className:"flex items-center gap-3",children:[W,t.jsxs("div",{className:"space-y-1",children:[Z,t.jsx("p",{className:"text-sm font-bold",children:te})]})]})}),e[47]=te,e[48]=M):M=e[48];let G;e[49]===Symbol.for("react.memo_cache_sentinel")?(G=t.jsx("div",{className:"rounded-full bg-secondary p-3",children:t.jsx(Me,{className:"h-5 w-5 text-secondary-foreground"})}),e[49]=G):G=e[49];let J;e[50]===Symbol.for("react.memo_cache_sentinel")?(J=t.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"Created By"}),e[50]=J):J=e[50];const se=s.user?.name;let z;e[51]!==se?(z=t.jsx("div",{className:"rounded-lg border bg-card p-6 hover:shadow-md transition-shadow",children:t.jsxs("div",{className:"flex items-center gap-3",children:[G,t.jsxs("div",{className:"space-y-1",children:[J,t.jsx("p",{className:"text-sm font-bold",children:se})]})]})}),e[51]=se,e[52]=z):z=e[52];let K;e[53]===Symbol.for("react.memo_cache_sentinel")?(K=t.jsx("div",{className:"rounded-full bg-muted p-3",children:t.jsx(pe,{className:"h-5 w-5 text-muted-foreground"})}),e[53]=K):K=e[53];let Q;e[54]===Symbol.for("react.memo_cache_sentinel")?(Q=t.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"Total Entities"}),e[54]=Q):Q=e[54];const re=t.jsxs("div",{className:"space-y-1",children:[Q,t.jsx("p",{className:"text-sm font-bold",children:l.length})]});let H;e[55]!==re?(H=t.jsx("div",{className:"rounded-lg border bg-card p-6 hover:shadow-md transition-shadow",children:t.jsxs("div",{className:"flex items-center gap-3",children:[K,re]})}),e[55]=re,e[56]=H):H=e[56],e[57]!==T||e[58]!==M||e[59]!==z||e[60]!==H?(o=t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[T,M,z,H]}),e[57]=T,e[58]=M,e[59]=z,e[60]=H,e[61]=o):o=e[61],u="rounded-lg border bg-card overflow-hidden",e[62]===Symbol.for("react.memo_cache_sentinel")?(i=t.jsxs("div",{className:"bg-gradient-to-r from-primary/10 to-accent/10 px-6 py-4 border-b",children:[t.jsx("h3",{className:"text-lg font-semibold",children:"Inspection Results"}),t.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Entities grouped by category with multiple notes and attachments"})]}),e[62]=i):i=e[62],h="p-6 space-y-8",f=Object.entries(C).map((ae,le)=>{const[oe,ce]=ae;return t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center gap-3 pb-3 border-b",children:[t.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-primary/20 text-primary text-sm font-bold",children:le+1}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-base font-semibold",children:oe}),t.jsxs("p",{className:"text-xs text-muted-foreground",children:[ce.length," ",ce.length===1?"item":"items"]})]})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 pl-11",children:ce.map(ne=>{const ie=L(ne.id),me=ie?.rating?.label,I=ie?.notes??[],xe=I.length>0,de=I.reduce(Ie,0);return t.jsxs("div",{className:"group rounded-lg border bg-background hover:bg-accent/5 p-4 transition-all hover:shadow-md",children:[t.jsxs("div",{className:"flex items-start justify-between gap-2 mb-3",children:[t.jsx("h5",{className:"text-sm font-medium leading-tight flex-1",children:ne.entity_label}),me?t.jsx(Ce,{className:"h-4 w-4 text-primary flex-shrink-0"}):t.jsx(De,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"})]}),t.jsxs("div",{className:"mb-2 flex flex-wrap items-center gap-2",children:[me?t.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-semibold bg-primary text-primary-foreground",children:ie.rating.label}):t.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-muted text-muted-foreground",children:"No rating"}),xe?t.jsxs("span",{className:"inline-flex items-center gap-1 px-2.5 py-0.5 rounded-full text-xs font-medium bg-muted text-muted-foreground",children:[t.jsx(Ae,{className:"h-3 w-3"}),I.length," Note",I.length===1?"":"s"]}):null,de>0?t.jsxs("span",{className:"inline-flex items-center gap-1 px-2.5 py-0.5 rounded-full text-xs font-medium bg-muted text-muted-foreground",children:[t.jsx(Ee,{className:"h-3 w-3"}),de," Attachment",de===1?"":"s"]}):null]}),xe?t.jsx("div",{className:"mt-3 pt-3 border-t border-dashed space-y-3",children:I.map(ze)}):t.jsx("div",{className:"mt-3 pt-3 border-t border-dashed",children:t.jsx("p",{className:"text-xs text-muted-foreground italic",children:"No notes or attachments."})})]},ne.id)})})]},oe)}),e[4]=s.camera_forms,e[5]=s.date,e[6]=s.id,e[7]=s.store?.store,e[8]=s.user?.name,e[9]=a.user,e[10]=n,e[11]=l,e[12]=h,e[13]=f,e[14]=u,e[15]=i,e[16]=p,e[17]=d,e[18]=o,e[19]=g,e[20]=m}else n=e[10],l=e[11],h=e[12],f=e[13],u=e[14],i=e[15],p=e[16],d=e[17],o=e[18],g=e[19],m=e[20];let j;e[63]!==h||e[64]!==f?(j=t.jsx("div",{className:h,children:f}),e[63]=h,e[64]=f,e[65]=j):j=e[65];let N;e[66]!==l.length?(N=l.length===0&&t.jsxs("div",{className:"p-12 text-center",children:[t.jsx(pe,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4 opacity-50"}),t.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Entities Found"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"This form doesn't have any entity data yet."})]}),e[66]=l.length,e[67]=N):N=e[67];let y;e[68]!==j||e[69]!==N||e[70]!==u||e[71]!==i?(y=t.jsxs("div",{className:u,children:[i,j,N]}),e[68]=j,e[69]=N,e[70]=u,e[71]=i,e[72]=y):y=e[72];let U;e[73]===Symbol.for("react.memo_cache_sentinel")?(U=t.jsx("span",{className:"font-medium",children:"Created:"}),e[73]=U):U=e[73];let b;e[74]!==s.created_at?(b=new Date(s.created_at).toLocaleString(),e[74]=s.created_at,e[75]=b):b=e[75];let v;e[76]!==b?(v=t.jsxs("div",{className:"flex items-center gap-2",children:[U,t.jsx("span",{children:b})]}),e[76]=b,e[77]=v):v=e[77];let R;e[78]===Symbol.for("react.memo_cache_sentinel")?(R=t.jsx("span",{className:"font-medium",children:"Last Updated:"}),e[78]=R):R=e[78];let _;e[79]!==s.updated_at?(_=new Date(s.updated_at).toLocaleString(),e[79]=s.updated_at,e[80]=_):_=e[80];let w;e[81]!==_?(w=t.jsxs("div",{className:"flex items-center gap-2",children:[R,t.jsx("span",{children:_})]}),e[81]=_,e[82]=w):w=e[82];let k;e[83]!==v||e[84]!==w?(k=t.jsx("div",{className:"rounded-lg border bg-muted/30 p-4",children:t.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 text-xs text-muted-foreground",children:[v,w]})}),e[83]=v,e[84]=w,e[85]=k):k=e[85];let S;e[86]!==y||e[87]!==k||e[88]!==p||e[89]!==d||e[90]!==o?(S=t.jsxs("div",{className:p,children:[d,o,y,k]}),e[86]=y,e[87]=k,e[88]=p,e[89]=d,e[90]=o,e[91]=S):S=e[91];let q;return e[92]!==n||e[93]!==S||e[94]!==g||e[95]!==m?(q=t.jsxs(n,{user:g,children:[m,S]}),e[92]=n,e[93]=S,e[94]=g,e[95]=m,e[96]=q):q=e[96],q}function ze(r,e){const a=typeof r.note=="string"?r.note.trim():"",s=r.attachments??[],n=a.length>0,l=s.length>0;return t.jsxs("div",{className:"rounded-md border bg-muted/10 p-3 space-y-2",children:[t.jsxs("div",{className:"text-[11px] font-semibold text-muted-foreground",children:["Note #",e+1]}),n?t.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed whitespace-pre-wrap",children:r.note}):t.jsx("p",{className:"text-xs text-muted-foreground italic",children:"(no text)"}),l?t.jsx("div",{className:"space-y-2",children:s.map(He)}):t.jsx("div",{className:"text-xs text-muted-foreground italic",children:"(no attachments)"})]},r.id??e)}function He(r){return r?.url?t.jsx("img",{src:r.url,alt:"Note attachment",className:"max-h-48 rounded-md border"},r.id):null}function Ie(r,e){return r+(e.attachments?.length??0)}function Ue(){return ge.visit("/camera-forms")}function Re(r,e){const a=e.category?.label||"Uncategorized";return r[a]||(r[a]=[]),r[a].push(e),r}function qe(r){return r.entity}export{Je as default};
