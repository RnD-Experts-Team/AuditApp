import{c as Xe,r as m,j as t,a as ze,H as Ue}from"./app-BQRJ0j_D.js";import{A as qe}from"./app-layout-DmC8kEH5.js";import"./app-CGKmwihm.js";import"./button-CiWo4oFx.js";import"./index-eVsFUjm_.js";import"./index-Bn9IGVAo.js";import"./index-AaGKiXUI.js";function et(l){const e=Xe.c(96),{auth:d,entities:u,ratings:je,stores:G}=l;let X;e[0]!==u?(X=u===void 0?[]:u,e[0]=u,e[1]=X):X=e[1];const ue=X,ke=je===void 0?[]:je;let z;e[2]!==G?(z=G===void 0?[]:G,e[2]=G,e[3]=z):z=e[3];const fe=z,[a,Ae]=m.useState("daily"),[o,Re]=m.useState("");let U;e[4]===Symbol.for("react.memo_cache_sentinel")?(U={},e[4]=U):U=e[4];const[M,_e]=m.useState(U),[x,Te]=m.useState(""),[p,De]=m.useState(""),[q,xe]=m.useState(!1);let H;e[5]===Symbol.for("react.memo_cache_sentinel")?(H={},e[5]=H):H=e[5];const[n,we]=m.useState(H);let O;if(e[6]!==a||e[7]!==ue||e[8]!==o){let s;e[10]!==a||e[11]!==o?(s=r=>{const i=r.date_range_type===a,c=!o||r.report_type===o;return i&&c},e[10]=a,e[11]=o,e[12]=s):s=e[12],O=ue.filter(s),e[6]=a,e[7]=ue,e[8]=o,e[9]=O}else O=e[9];const f=O;let K;e[13]!==f?(K=()=>{const s={};f.forEach(r=>{s[r.id]={entity_id:r.id,rating_id:null,note:""}}),_e(s)},e[13]=f,e[14]=K):K=e[14];let P;e[15]!==a||e[16]!==o?(P=[a,o],e[15]=a,e[16]=o,e[17]=P):P=e[17],m.useEffect(K,P);let W;e[18]!==p||e[19]!==M||e[20]!==x?(W=s=>{s.preventDefault(),xe(!0);const r=Object.values(M).filter(We);ze.post("/camera-forms",{store_id:x,date:p,entities:r},{preserveScroll:!0,onSuccess:()=>{xe(!1)},onError:i=>{we(i),xe(!1)}})},e[18]=p,e[19]=M,e[20]=x,e[21]=W):W=e[21];const pe=W;let $;e[22]===Symbol.for("react.memo_cache_sentinel")?($=(s,r,i)=>{_e(c=>({...c,[s]:{...c[s],[r]:i}}))},e[22]=$):$=e[22];const Ne=$,ge=[...f].sort(Pe),Se=ge.reduce(Ke,{}),Fe=Object.keys(Se).sort((s,r)=>{const i=ge.find(ye=>(ye.category?.label||"Uncategorized")===s)?.category,c=ge.find(ye=>(ye.category?.label||"Uncategorized")===r)?.category,Ee=i?.sort_order??Number.MAX_SAFE_INTEGER,Ce=c?.sort_order??Number.MAX_SAFE_INTEGER;return Ee!==Ce?Ee-Ce:s.localeCompare(r)}),be=qe,Ie=d.user;let g;e[23]===Symbol.for("react.memo_cache_sentinel")?(g=t.jsx(Ue,{title:"Create Camera Form"}),e[23]=g):g=e[23];const Be="flex flex-1 flex-col gap-4 p-4 pt-0";let b;e[24]===Symbol.for("react.memo_cache_sentinel")?(b=t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Create Camera Form"}),t.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Fill out the inspection form for camera monitoring"})]}),t.jsx("a",{href:"/camera-forms",className:"text-sm font-medium text-muted-foreground hover:text-foreground",children:"â† Back"})]}),e[24]=b):b=e[24];const Me="space-y-6";let J;e[25]===Symbol.for("react.memo_cache_sentinel")?(J=t.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Filter Entities"}),e[25]=J):J=e[25];let L;e[26]===Symbol.for("react.memo_cache_sentinel")?(L=t.jsx("label",{className:"text-sm font-medium",children:"Date Range Type"}),e[26]=L):L=e[26];let Q;e[27]===Symbol.for("react.memo_cache_sentinel")?(Q=s=>Ae(s.target.value),e[27]=Q):Q=e[27];let V,Y;e[28]===Symbol.for("react.memo_cache_sentinel")?(V=t.jsx("option",{value:"daily",children:"Daily"}),Y=t.jsx("option",{value:"weekly",children:"Weekly"}),e[28]=V,e[29]=Y):(V=e[28],Y=e[29]);let h;e[30]!==a?(h=t.jsxs("div",{className:"space-y-2",children:[L,t.jsxs("select",{value:a,onChange:Q,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring",children:[V,Y]})]}),e[30]=a,e[31]=h):h=e[31];let Z;e[32]===Symbol.for("react.memo_cache_sentinel")?(Z=t.jsx("label",{className:"text-sm font-medium",children:"Report Type"}),e[32]=Z):Z=e[32];let ee;e[33]===Symbol.for("react.memo_cache_sentinel")?(ee=s=>Re(s.target.value),e[33]=ee):ee=e[33];let te,se,le;e[34]===Symbol.for("react.memo_cache_sentinel")?(te=t.jsx("option",{value:"",children:"All Types"}),se=t.jsx("option",{value:"main",children:"Main"}),le=t.jsx("option",{value:"secondary",children:"Secondary"}),e[34]=te,e[35]=se,e[36]=le):(te=e[34],se=e[35],le=e[36]);let v;e[37]!==o?(v=t.jsxs("div",{className:"space-y-2",children:[Z,t.jsxs("select",{value:o,onChange:ee,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring",children:[te,se,le]})]}),e[37]=o,e[38]=v):v=e[38];let y;e[39]!==h||e[40]!==v?(y=t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[h,v]}),e[39]=h,e[40]=v,e[41]=y):y=e[41];let j;e[42]!==f.length?(j=t.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Showing ",f.length," entities"]}),e[42]=f.length,e[43]=j):j=e[43];let _;e[44]!==y||e[45]!==j?(_=t.jsxs("div",{className:"rounded-lg border bg-accent/50 p-6",children:[J,y,j]}),e[44]=y,e[45]=j,e[46]=_):_=e[46];let re;e[47]===Symbol.for("react.memo_cache_sentinel")?(re=t.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Basic Information"}),e[47]=re):re=e[47];let ie;e[48]===Symbol.for("react.memo_cache_sentinel")?(ie=t.jsxs("label",{className:"text-sm font-medium",children:["Store ",t.jsx("span",{className:"text-destructive",children:"*"})]}),e[48]=ie):ie=e[48];let oe;e[49]===Symbol.for("react.memo_cache_sentinel")?(oe=s=>Te(s.target.value),e[49]=oe):oe=e[49];let ne;e[50]===Symbol.for("react.memo_cache_sentinel")?(ne=t.jsx("option",{value:"",children:"Select Store"}),e[50]=ne):ne=e[50];let N;e[51]!==fe?(N=fe.map(Oe),e[51]=fe,e[52]=N):N=e[52];let S;e[53]!==x||e[54]!==N?(S=t.jsxs("select",{value:x,onChange:oe,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring",required:!0,children:[ne,N]}),e[53]=x,e[54]=N,e[55]=S):S=e[55];let E;e[56]!==n.store_id?(E=n.store_id&&t.jsx("p",{className:"text-sm text-destructive",children:n.store_id}),e[56]=n.store_id,e[57]=E):E=e[57];let C;e[58]!==S||e[59]!==E?(C=t.jsxs("div",{className:"space-y-2",children:[ie,S,E]}),e[58]=S,e[59]=E,e[60]=C):C=e[60];let ae;e[61]===Symbol.for("react.memo_cache_sentinel")?(ae=t.jsxs("label",{className:"text-sm font-medium",children:["Date ",t.jsx("span",{className:"text-destructive",children:"*"})]}),e[61]=ae):ae=e[61];let ce;e[62]===Symbol.for("react.memo_cache_sentinel")?(ce=s=>De(s.target.value),e[62]=ce):ce=e[62];let k;e[63]!==p?(k=t.jsx("input",{type:"date",value:p,onChange:ce,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring",required:!0}),e[63]=p,e[64]=k):k=e[64];let A;e[65]!==n.date?(A=n.date&&t.jsx("p",{className:"text-sm text-destructive",children:n.date}),e[65]=n.date,e[66]=A):A=e[66];let R;e[67]!==k||e[68]!==A?(R=t.jsxs("div",{className:"space-y-2",children:[ae,k,A]}),e[67]=k,e[68]=A,e[69]=R):R=e[69];let T;e[70]!==C||e[71]!==R?(T=t.jsxs("div",{className:"rounded-lg border bg-card p-6",children:[re,t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[C,R]})]}),e[70]=C,e[71]=R,e[72]=T):T=e[72];const Ge="space-y-4",he=Fe.map(s=>{const r=Se[s];return t.jsxs("div",{className:"rounded-lg border bg-card",children:[t.jsx("div",{className:"border-b bg-muted/50 px-6 py-4",children:t.jsx("h3",{className:"text-lg font-semibold",children:s})}),t.jsx("div",{className:"p-6 space-y-4",children:r.map(i=>t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 p-4 rounded-md bg-muted/20",children:[t.jsx("div",{className:"flex items-center",children:t.jsx("label",{className:"text-sm font-medium",children:i.entity_label})}),t.jsx("div",{className:"space-y-1",children:t.jsxs("select",{value:M[i.id]?.rating_id||"",onChange:c=>Ne(i.id,"rating_id",c.target.value?Number(c.target.value):null),className:"flex h-9 w-full rounded-md border border-input bg-background px-3 py-1 text-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring",children:[t.jsx("option",{value:"",children:"Select Rating"}),ke.map(He)]})}),t.jsx("div",{className:"space-y-1",children:t.jsx("input",{type:"text",placeholder:"Note (optional)",value:M[i.id]?.note||"",onChange:c=>Ne(i.id,"note",c.target.value),className:"flex h-9 w-full rounded-md border border-input bg-background px-3 py-1 text-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring"})})]},i.id))})]},s)});let D;e[73]!==he?(D=t.jsx("div",{className:Ge,children:he}),e[73]=he,e[74]=D):D=e[74];let w;e[75]!==n.entities?(w=n.entities&&t.jsx("p",{className:"text-sm text-destructive",children:n.entities}),e[75]=n.entities,e[76]=w):w=e[76];let de;e[77]===Symbol.for("react.memo_cache_sentinel")?(de=t.jsx("a",{href:"/camera-forms",className:"inline-flex items-center justify-center rounded-md border border-input bg-background px-4 py-2 text-sm font-medium hover:bg-accent hover:text-accent-foreground",children:"Cancel"}),e[77]=de):de=e[77];const ve=q?"Creating...":"Create Form";let F;e[78]!==q||e[79]!==ve?(F=t.jsxs("div",{className:"flex justify-end gap-3 pt-6 border-t",children:[de,t.jsx("button",{type:"submit",disabled:q,className:"inline-flex items-center justify-center rounded-md bg-primary px-4 py-2 text-sm font-medium text-primary-foreground shadow hover:bg-primary/90 disabled:opacity-50",children:ve})]}),e[78]=q,e[79]=ve,e[80]=F):F=e[80];let I;e[81]!==pe||e[82]!==_||e[83]!==T||e[84]!==D||e[85]!==w||e[86]!==F?(I=t.jsxs("form",{onSubmit:pe,className:Me,children:[_,T,D,w,F]}),e[81]=pe,e[82]=_,e[83]=T,e[84]=D,e[85]=w,e[86]=F,e[87]=I):I=e[87];let B;e[88]!==b||e[89]!==I?(B=t.jsxs("div",{className:Be,children:[b,I]}),e[88]=b,e[89]=I,e[90]=B):B=e[90];let me;return e[91]!==be||e[92]!==d.user||e[93]!==g||e[94]!==B?(me=t.jsxs(be,{user:Ie,children:[g,B]}),e[91]=be,e[92]=d.user,e[93]=g,e[94]=B,e[95]=me):me=e[95],me}function He(l){return t.jsx("option",{value:l.id,children:l.label},l.id)}function Oe(l){return t.jsx("option",{value:l.id,children:l.store},l.id)}function Ke(l,e){const d=e.category?.label||"Uncategorized";return l[d]||(l[d]=[]),l[d].push(e),l}function Pe(l,e){const d=l.sort_order??Number.MAX_SAFE_INTEGER,u=e.sort_order??Number.MAX_SAFE_INTEGER;return d!==u?d-u:l.entity_label.localeCompare(e.entity_label)}function We(l){return l.rating_id||l.note}export{et as default};
